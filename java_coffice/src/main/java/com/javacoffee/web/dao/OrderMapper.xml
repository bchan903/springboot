<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.javacoffee.web.dao.IOrderDAO">
  
  

  		
  		<resultMap type="com.javacoffee.web.model.OrderVO" id="ordResult">
  			<result property="orderNo" column="orderNo"/>
  			<result property="prdNo" column="prdNo"/>
  			<result property="memId" column="memId"/>
  			<result property="memName" column="memName"/> 
  			<result property="memTel" column="memTel"/>   	
  			<result property="memEmail" column="memEmail"/> 
  			<result property="memAddress" column="memAddress"/> 
  			<result property="prdName" column="prdName"/>   	
  			<result property="ordStatus" column="ordStatus"/> 
  			<result property="subsStart" column="subsStart"/> 
  			<result property="subsEnd" column="subsEnd"/> 
  			<result property="createDate" column="createDate"/> 
  			
  		</resultMap>  
  
  		<select id="orderList" resultMap="ordResult">
  			<![CDATA[
  				select a.ordno as orderno, a.prdno,a.custid as memid,b.Name as memname,b.tel1 ||'-'|| b.tel2||'-'||b.tel3 as memtel , b.email as mememail, b.zipcode||' '||b.address1||' '||b.address2 as memaddress, c.prdName as prdname ,a.status as ordstatus, a.subsStart,a.subsend from ordermaster a, member b, product c
				where a.custid=b.id and a.prdno=c.prdno order by a.orddate desc
 			]]>
  		</select>
  		
<!--   		<select id="productMain" resultMap="prdResult"> -->
<!--   			<![CDATA[ -->
<!--   				SELECT * FROM product where sellYN='Y' order by prdNo -->
<!--   			]]> -->
<!--   		</select> -->
  		
<!--   		<select id="selectProduct" resultMap="prdResult"> -->
<!--   			<![CDATA[ -->
<!-- 				SELECT * FROM product where prdNo=#{prdNo} -->
<!-- 			]]> -->
<!-- 		</select> -->

		<insert id="insertOrder" parameterType="com.javacoffee.web.model.OrderVO">
  			<![CDATA[
				INSERT INTO orderMaster(ordno,prdno,custid,status,subsstart,subsend)
				VALUES (SEQ_ORD.NEXTVAL,#{prdNo},#{memId},#{ordStatus},#{subsStart},#{subsEnd})
			]]>
		</insert>


  </mapper>
  
  
  